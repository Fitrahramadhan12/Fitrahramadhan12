<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>PERPUSTAKAAN UNIVERSITAS WIDYATAMA</title>
<style>
body {
  margin: 0:
  padding: 0:
  font-family: Ariel, sans-serif;
  background: #f0f0f0:
}
header {
  background: linear-gradient(to right, #00a6a6, #0070b8);
  color: white;
  text-align: center;
  padding: 20px 0;
}
h1 {
  margin: 1;
}
nav {
  background-color: #00a6a6;
  width: 100%;
  position: sticky;
  top: 0;
  z-index: 100;
}
nav ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
  overflow: hidden;
}
nav li {
  float: left;
  width: auto; /* Override previous float settings */
}
nav li a, .dropbtn {
  display: inline-block;
  color: white;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
}
nav li a:hover, .dropdown:hover .dropbtn {
  background-color: #0070b8;
}
nav li.dropdown {
  display: inline-block;
}
nav .dropdown-content {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}
nav .dropdown-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
  text-align: left;
}
nav .dropdown-content a:hover {
  background-color: #f1f1f1;
}
nav .dropdown:hover .dropdown-content {
  display: block;
}
</style>
	<link rel="stylesheet" type="text/css" href="style.css">
  <link rel="stylesheet" type="text/css" href="modul5.css">

<!-- Add these scripts in the head section -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Add these in the head section -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.css" />
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
</head>
<header>
    <h1>Selamat Datang di Website Perpustakaan SUKA BACA</h1>
</header>
<nav>
	<ul>
		<li>
			<a href="index.html" class="dropbtn">Home</a>
		</li>
		<li class="dropdown">
			<a href="javascript:void(0)" class="dropbtn">Layanan</a>
			<div class="dropdown-content">
				<a href="Formulir Anggota Perpustakaan.html">Formulir Anggota Perpustakaan</a>
				<a href="Tabel Bahan Buku.html">Tabel Bahan Buku</a>
				<a href="Pemesanan Buku.html">Pemesanan Buku</a>
				<a href="Perpanjangan Peminjaman Buku.html">Perpanjangan Peminjaman Buku</a>
			</div>
		</li>
		<li class="dropdown">
			<a href="javascript:void(0)" class="dropbtn">Menu</a>
			<div class="dropdown-content">
				<a href="Modul 4.html">Perpustakaan Suka Baca</a>
				<a href="Pameran Buku.html">Perpustakaan Online</a>
			</div>
		</li>
		<li class="dropdown">
			<a href="Modul 6.html" class="dropbtn">Statistik</a>
		</li>
		<li class="dropdown">
			<a href="javascript:void(0)" class="dropbtn">Materi</a>
			<div class="dropdown-content">
				<a href="">Modul 1</a>
				<a href="">Modul 3</a>
				<a href="http://localhost/fitrah/">Modul 7</a>
				<a href="http://localhost/fitrah/">Modul 8</a>
			</div>
		</li>
	</ul>
</nav>

<!-- Replace the existing content div with this structure -->
<div class="content">
    <h2>Statistik Perpustakaan</h2>
    
    <div class="controls">
        <button id="showBookStats" class="active">Koleksi Buku</button>
        <button id="showVisitorStats">Pengunjung</button>
        <button id="refreshData">Perbarui Data</button>
    </div>
    
    <div class="chart-container" id="bookStatsContainer">
        <canvas id="bookStats"></canvas>
    </div>
    
    <div class="chart-container" id="visitorStatsContainer" style="display: none;">
        <canvas id="visitorStats"></canvas>
    </div>
</div>

<!-- Add this after the existing charts -->
<div class="content-section">
    <h2>Katalog Buku</h2>
    <div class="book-search">
        <input type="text" id="searchDate" placeholder="Pilih tanggal pencarian" readonly>
        <button id="addBook">Tambah Buku</button>
    </div>
    
    <table id="bookTable" class="display">
        <thead>
            <tr>
                <th>Judul</th>
                <th>Penulis</th>
                <th>Kategori</th>
                <th>Status</th>
                <th>Tanggal Masuk</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody>
            <!-- Data will be populated by JavaScript -->
        </tbody>
    </table>
</div>

<!-- Add this dialog markup -->
<div id="addBookDialog" title="Tambah Buku Baru" style="display:none;">
    <form id="bookForm">
        <div class="form-group">
            <label>Judul:</label>
            <input type="text" id="bookTitle" required>
        </div>
        <div class="form-group">
            <label>Penulis:</label>
            <input type="text" id="bookAuthor" required>
        </div>
        <div class="form-group">
            <label>Kategori:</label>
            <select id="bookCategory">
                <option>Fiksi</option>
                <option>Non-Fiksi</option>
                <option>Akademik</option>
                <option>Majalah</option>
                <option>E-Book</option>
            </select>
        </div>
    </form>
</div>

<!-- Add edit dialog -->
<div id="editBookDialog" title="Edit Buku" style="display:none;">
    <form id="editBookForm">
        <div class="form-group">
            <label>Judul:</label>
            <input type="text" id="editBookTitle" required>
        </div>
        <div class="form-group">
            <label>Penulis:</label>
            <input type="text" id="editBookAuthor" required>
        </div>
        <div class="form-group">
            <label>Kategori:</label>
            <select id="editBookCategory">
                <option>Fiksi</option>
                <option>Non-Fiksi</option>
                <option>Akademik</option>
                <option>Majalah</option>
                <option>E-Book</option>
            </select>
        </div>
        <div class="form-group">
            <label>Status:</label>
            <select id="editBookStatus">
                <option>Tersedia</option>
                <option>Dipinjam</option>
            </select>
        </div>
    </form>
</div>

<!-- Add delete confirmation dialog -->
<div id="deleteConfirmDialog" title="Konfirmasi Hapus" style="display:none;">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:12px 12px 20px 0;"></span>
    Apakah Anda yakin ingin menghapus buku ini?</p>
</div>

<!-- Replace the existing script with jQuery implementation -->
<script>
$(document).ready(function() {
    // Chart objects
    let bookChart, visitorChart;

    // Initialize charts
    function initializeCharts() {
        // Book Statistics Chart
        const bookCtx = $('#bookStats')[0].getContext('2d');
        bookChart = new Chart(bookCtx, {
            type: 'bar',
            data: {
                labels: ['Fiksi', 'Non-Fiksi', 'Akademik', 'Majalah', 'E-Book'],
                datasets: [{
                    label: 'Jumlah Koleksi Buku',
                    data: [1200, 800, 1500, 300, 2000],
                    backgroundColor: [
                        '#00a6a6',
                        '#0070b8',
                        '#00c1c1',
                        '#0086db',
                        '#00d7d7'
                    ]
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Koleksi Buku Berdasarkan Kategori'
                    }
                }
            }
        });

        // Visitor Statistics Chart
        const visitorCtx = $('#visitorStats')[0].getContext('2d');
        visitorChart = new Chart(visitorCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun'],
                datasets: [{
                    label: 'Pengunjung Perpustakaan 2024',
                    data: [500, 600, 750, 800, 950, 1000],
                    borderColor: '#00a6a6',
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Trend Pengunjung Perpustakaan'
                    }
                }
            }
        });
    }

    // Initialize charts
    initializeCharts();

    // Chart toggle functionality
    $('#showBookStats').on('click', function() {
        $(this).addClass('active');
        $('#showVisitorStats').removeClass('active');
        $('#bookStatsContainer').fadeIn(400);
        $('#visitorStatsContainer').fadeOut(400);
    });

    $('#showVisitorStats').on('click', function() {
        $(this).addClass('active');
        $('#showBookStats').removeClass('active');
        $('#visitorStatsContainer').fadeIn(400);
        $('#bookStatsContainer').fadeOut(400);
    });

    // Refresh data functionality
    $('#refreshData').on('click', function() {
        // Generate new random data
        const newBookData = Array.from({length: 5}, () => Math.floor(Math.random() * 2000) + 100);
        const newVisitorData = Array.from({length: 6}, () => Math.floor(Math.random() * 1000) + 100);

        // Update currently visible chart with animation
        const activeChart = $('#bookStatsContainer').is(':visible') ? bookChart : visitorChart;
        const activeContainer = $('#bookStatsContainer').is(':visible') ? '#bookStatsContainer' : '#visitorStatsContainer';

        $(activeContainer).fadeOut(200, function() {
            if (activeChart === bookChart) {
                bookChart.data.datasets[0].data = newBookData;
                bookChart.update();
            } else {
                visitorChart.data.datasets[0].data = newVisitorData;
                visitorChart.update();
            }
            $(this).fadeIn(200);
        });

        // Show notification
        toastr.success('Data statistik telah diperbarui!');
    });

    // Replace the existing bookData array with this:
    const bookData = [
        ["Harry Potter and the Sorcerer's Stone", "J.K. Rowling", "Fiksi", "Tersedia", "2024-01-15"],
        ["Clean Code", "Robert Martin", "Akademik", "Dipinjam", "2024-02-01"],
        ["National Geographic: Ocean Life", "Various", "Majalah", "Tersedia", "2024-03-10"],
        ["The Lord of the Rings", "J.R.R. Tolkien", "Fiksi", "Tersedia", "2024-01-20"],
        ["Introduction to Algorithms", "Thomas H. Cormen", "Akademik", "Tersedia", "2024-02-05"],
        ["Time Magazine: Tech Edition", "Various", "Majalah", "Dipinjam", "2024-03-15"],
        ["Python Programming", "Mark Lutz", "E-Book", "Tersedia", "2024-01-25"],
        ["The Great Gatsby", "F. Scott Fitzgerald", "Fiksi", "Tersedia", "2024-02-10"],
        ["Data Science Basics", "John Smith", "E-Book", "Dipinjam", "2024-03-20"],
        ["Pride and Prejudice", "Jane Austen", "Fiksi", "Tersedia", "2024-01-30"],
        ["Web Development Guide", "Sarah Johnson", "Akademik", "Tersedia", "2024-02-15"],
        ["Forbes: Business Edition", "Various", "Majalah", "Tersedia", "2024-03-25"],
        ["The Hobbit", "J.R.R. Tolkien", "Fiksi", "Dipinjam", "2024-01-05"],
        ["JavaScript Complete Guide", "David Miller", "E-Book", "Tersedia", "2024-02-20"],
        ["Scientific American", "Various", "Majalah", "Tersedia", "2024-03-30"],
        ["1984", "George Orwell", "Fiksi", "Tersedia", "2024-01-10"],
        ["Machine Learning Basics", "Andrew Ng", "Akademik", "Dipinjam", "2024-02-25"],
        ["Wired Magazine", "Various", "Majalah", "Tersedia", "2024-04-01"],
        ["To Kill a Mockingbird", "Harper Lee", "Fiksi", "Tersedia", "2024-01-12"],
        ["Database Design", "Emily Brown", "E-Book", "Tersedia", "2024-02-28"],
        ["The Catcher in the Rye", "J.D. Salinger", "Fiksi", "Dipinjam", "2024-01-14"],
        ["Artificial Intelligence", "Peter Chen", "Akademik", "Tersedia", "2024-03-02"],
        ["Popular Science", "Various", "Majalah", "Tersedia", "2024-04-05"],
        ["Brave New World", "Aldous Huxley", "Fiksi", "Tersedia", "2024-01-16"],
        ["Cloud Computing", "Lisa Wang", "E-Book", "Dipinjam", "2024-03-05"],
        // ... continue with more entries ...
    ];

    // Function to generate random dates between two dates
    function randomDate(start, end) {
        return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime())).toISOString().split('T')[0];
    }

    // Function to generate random status
    function randomStatus() {
        return Math.random() < 0.7 ? "Tersedia" : "Dipinjam";
    }

    // Generate additional entries to reach 100
    const categories = ["Fiksi", "Non-Fiksi", "Akademik", "Majalah", "E-Book"];
    const authors = [
        "John Smith", "Emma Wilson", "Michael Brown", "Sarah Davis", "David Miller",
        "Lisa Anderson", "Robert Taylor", "Maria Garcia", "James Johnson", "Anna Lee"
    ];

    for (let i = bookData.length; i < 100; i++) {
        const randomCategory = categories[Math.floor(Math.random() * categories.length)];
        const randomAuthor = authors[Math.floor(Math.random() * authors.length)];
        const randomTitle = `Buku ${randomCategory} ${i + 1}`;
        const date = randomDate(new Date(2024, 0, 1), new Date(2024, 3, 30));
        
        bookData.push([
            randomTitle,
            randomAuthor,
            randomCategory,
            randomStatus(),
            date
        ]);
    }

    // Sort the data by date
    bookData.sort((a, b) => new Date(a[4]) - new Date(b[4]));

    // Update DataTable initialization
    const bookTable = $('#bookTable').DataTable({
        data: bookData,
        responsive: true,
        pageLength: 10,
        lengthMenu: [[10, 25, 50, 100], [10, 25, 50, 100]],
        order: [[4, 'desc']],
        columns: [
            { data: 0 }, // Judul
            { data: 1 }, // Penulis
            { data: 2 }, // Kategori
            { data: 3 }, // Status
            { data: 4 }, // Tanggal
            { 
                data: null,
                defaultContent: `
                    <button class="edit-btn"><i class="fas fa-edit"></i> Edit</button>
                    <button class="delete-btn"><i class="fas fa-trash"></i> Hapus</button>
                `,
                orderable: false
            }
        ],
        language: {
            search: "Cari:",
            lengthMenu: "Tampilkan _MENU_ entri",
            info: "Menampilkan _START_ sampai _END_ dari _TOTAL_ entri",
            paginate: {
                first: "Pertama",
                last: "Terakhir",
                next: "Selanjutnya",
                previous: "Sebelumnya"
            },
            infoFiltered: "(difilter dari _MAX_ total entri)",
            emptyTable: "Tidak ada data yang tersedia"
        }
    });

    // Initialize Edit Dialog
    const editDialog = $('#editBookDialog').dialog({
        autoOpen: false,
        modal: true,
        width: 400,
        buttons: {
            "Simpan": function() {
                const row = $(this).data('row');
                const data = bookTable.row(row).data();
                
                data[0] = $('#editBookTitle').val();
                data[1] = $('#editBookAuthor').val();
                data[2] = $('#editBookCategory').val();
                data[3] = $('#editBookStatus').val();
                
                bookTable.row(row).data(data).draw();
                
                toastr.success('Data buku berhasil diperbarui!');
                editDialog.dialog('close');
            },
            "Batal": function() {
                $(this).dialog('close');
            }
        }
    });

    // Initialize Delete Confirmation Dialog
    const deleteDialog = $('#deleteConfirmDialog').dialog({
        autoOpen: false,
        modal: true,
        width: 300,
        buttons: {
            "Hapus": function() {
                const row = $(this).data('row');
                bookTable.row(row).remove().draw();
                toastr.success('Buku berhasil dihapus!');
                deleteDialog.dialog('close');
            },
            "Batal": function() {
                $(this).dialog('close');
            }
        }
    });

    // Initialize jQuery UI Datepicker
    $('#searchDate').datepicker({
        dateFormat: 'yy-mm-dd',
        onSelect: function(dateText) {
            bookTable.search(dateText).draw();
            toastr.info('Mencari buku untuk tanggal: ' + dateText);
        }
    });

    // Initialize jQuery UI Dialog
    const dialog = $('#addBookDialog').dialog({
        autoOpen: false,
        modal: true,
        width: 400,
        buttons: {
            "Simpan": function() {
                const title = $('#bookTitle').val();
                const author = $('#bookAuthor').val();
                const category = $('#bookCategory').val();
                
                if (title && author) {
                    const today = new Date().toISOString().split('T')[0];
                    bookTable.row.add([
                        title,
                        author,
                        category,
                        "Tersedia",
                        today
                    ]).draw();

                    toastr.success('Buku baru berhasil ditambahkan!');
                    dialog.dialog('close');
                    $('#bookForm')[0].reset();
                } else {
                    toastr.error('Mohon isi semua field yang diperlukan');
                }
            },
            "Batal": function() {
                dialog.dialog('close');
            }
        }
    });

    // Add Book button click handler
    $('#addBook').on('click', function() {
        dialog.dialog('open');
    });

    // Configure Toastr
    toastr.options = {
        "closeButton": true,
        "progressBar": true,
        "positionClass": "toast-top-right",
        "timeOut": "3000"
    };
});
</script>

<!-- Add these styles -->
<style>
.content {
    max-width: 1000px;
    margin: 30px auto;
    padding: 20px;
}

.controls {
    text-align: center;
    margin: 20px 0;
    padding: 10px;
    display: flex;
    justify-content: center;
    gap: 15px;
}

.controls button {
    background-color: #f0f0f0;
    color: #333;
    border: 2px solid #00a6a6;
    padding: 12px 24px;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 14px;
    min-width: 150px;
    font-weight: 500;
}

.controls button.active {
    background-color: #00a6a6;
    color: white;
}

.controls button:hover {
    background-color: #0070b8;
    border-color: #0070b8;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.controls button:active {
    transform: translateY(0);
    box-shadow: none;
}

.chart-container {
    width: 80%;
    margin: 20px auto;
    padding: 20px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 15px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    display: block; /* Ensure proper display */
}

.chart-container:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.15);
}

.content-section {
    margin: 40px auto;
    max-width: 1200px;
    padding: 20px;
}

.book-search {
    margin-bottom: 20px;
    display: flex;
    gap: 10px;
}

#searchDate {
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

#addBook {
    background-color: #00a6a6;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
}

#addBook:hover {
    background-color: #0070b8;
}

.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
}

.form-group input,
.form-group select {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

/* DataTables customization */
.dataTables_wrapper {
    padding: 20px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 15px rgba(0,0,0,0.1);
}

table.dataTable thead th {
    background-color: #00a6a6;
    color: white;
}

.dataTables_length select,
.dataTables_filter input {
    padding: 6px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

/* Add to your existing styles */
table.dataTable thead th select {
    width: auto;
    padding: 2px;
    margin-top: 5px;
    font-size: 12px;
    border: 1px solid #ddd;
    border-radius: 3px;
    background-color: white;
    color: #333;
}

.dataTables_wrapper .dataTables_paginate .paginate_button.current {
    background: #00a6a6;
    color: white !important;
    border: 1px solid #00a6a6;
}

.dataTables_wrapper .dataTables_paginate .paginate_button:hover {
    background: #0070b8;
    color: white !important;
    border: 1px solid #0070b8;
}
</style>

<footer class="site-footer">
	<div class="footer-section contact">
		<p>Pertanyaan umum dan informasi</p>
			<p>+62 812 1103 5576 (WhatsApp, hanya pada jam kerja)</p>
		<p class="copyright">&copy; 2024 Perpustakaan Fitrah Ramadhan. All Rights Reserved.</p>
	</div>
</footer>
</html>
